redis çš„é€šä¿¡åè®®æ˜¯åŸºäºå­—ç¬¦ä¸²çš„ï¼Œè®¾è®¡çš„å¾ˆè½»å·§ï¼Œ äººå·¥å¯è¯»ã€‚

åè®®åç§°ï¼š RESP - REdis Serialization Protocol


### å‡ ä¸ªç®€å•çš„è§„åˆ™
1. +å•è¡Œå›å¤
2. -é”™è¯¯å›å¤
3. :æ•°æ®å›å¤
4. $num\r\ndata // numæ˜¯dataçš„å­—èŠ‚count
5. $-1  // -1è¡¨ç¤ºæ•°æ®ä¸å­˜åœ¨

### telnet demo

redisæ˜¯æ ‡å‡†çš„C/Sç»“æ„ï¼Œä¸€èˆ¬ä½¿ç”¨è‡ªå¸¦çš„redis-cliè¿æ¥rediså®ä¾‹ã€‚

å¦‚æœæ¡ä»¶æœ‰é™çš„è¯ï¼Œ telnetä¹Ÿè¡Œï¼Œä¸‹è¾¹ä½¿ç”¨telnetåšdemoã€‚

``` bash
cz@cz-dell:~$ telnet demo.xyz 6379
Trying xxx.xxx.xxx.xxx...
Connected to demo.xyz.
Escape character is '^]'.
auth your-redis-pwd //æœ‰å¯†ç çš„è¯ï¼Œ è¿™é‡Œè¦åšéªŒè¯
+OK
set year 2021
+OK
year
-ERR unknown command 'year'
incr year
:2022
get year
$4
2022
get book
$4
ğŸ‘
get bookbook
$-1
ping
+PONG
quit
+OK
Connection closed by foreign host.
```

### redisç¼–ç é—®é¢˜

å¯ä»¥çœ‹åˆ°ï¼Œ rediså¯ä»¥æ­£å¸¸è¯»emojiã€‚

å®é™…ä¸Šï¼Œ redis server æ˜¯æ²¡æœ‰å­—ç¬¦ç¼–ç çš„æ¦‚å¿µçš„ï¼Œredisè¯»å†™çš„éƒ½æ˜¯bytes.

redis å¯¹äºå†™å…¥çš„å­—ç¬¦å…·ä½“æ˜¯ä»€ä¹ˆç¼–ç æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œæ‰€ä»¥rediså¯¹äºå­—ç¬¦ä¸²å¤§å°çš„é™åˆ¶ï¼Œæ˜¯åŸºäºbyteçš„ï¼Œè€Œä¸æ˜¯åƒmysql varchar(100)è¡¨ç¤ºæœ€å¤§100ä¸ªå­—ç¬¦ã€‚

`mysql varchar(100)`åœ¨è¿™ä¸ªtableé‡‡ç”¨ä¸åŒç¼–ç æ—¶ï¼Œæœ€å¤§byteé™åˆ¶æ˜¯ä¸åŒçš„ã€‚

`utf8mb3`è€ç‰ˆæœ¬mysqlæ—¶ï¼Œ æœ€å¤§300byteï¼Œ100ä¸ªå­—ç¬¦ã€‚

`utf8mb4`æ—¶ï¼Œ æœ€å¤§400byteï¼Œ 100ä¸ªå­—ç¬¦ã€‚

clientç”¨utf8ç¼–ç å­—ç¬¦ä¸²ï¼Œå†™å…¥redisï¼Œè¯»å–bytesåä¹Ÿç”¨utf8è§£ç å°±å¯ä»¥å¾—åˆ°å­—ç¬¦ä¸²äº†ã€‚

å¦‚æœclient è¯»å†™çš„ç¼–ç ä¸ä¸€æ ·ï¼Œ å°±ä¼šåƒè¯»å†™æ–‡æœ¬æ–‡ä»¶ä¸€æ ·ï¼Œå‡ºç°ä¹±ç ã€‚

ä½†æ˜¯å·²ç»2021å¹´äº†ï¼Œ å­—ç¬¦ä¸²ç¼–ç ï¼Œutf8åŸºæœ¬éƒ½æ˜¯é»˜è®¤é…ç½®äº†ï¼Œæ‰€ä»¥ä¹±ç æƒ…å†µä¹Ÿæ¯”è¾ƒå°‘è§ã€‚
