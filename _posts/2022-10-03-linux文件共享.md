---
tags: linux rsync mount smb
---

èƒŒæ™¯ï¼š

ä¸€å°è€çš„ç¬”è®°æœ¬é€€å½¹äº†ï¼Œè£…äº†ä¸ª [emby](https://emby.media/) å½“ä¸ªæœ¬åœ°å½±è§†æœåŠ¡å™¨ï¼Œå­˜ä¸€äº›ä¸é”™çš„è€ç”µå½±ã€‚ç°åœ¨
éœ€è¦æŠŠä¸€æ‰¹ç”µå½±ç”µè§†å‰§å¤åˆ¶è¿‡å»ï¼Œè®°å½•ä¸€ä¸‹æŠ˜è…¾è¿‡ç¨‹ã€‚

### å¤åˆ¶æ–‡ä»¶

1. å°è¯•1

`scp aa.mp4 host:/dir`, å‘ç°é€Ÿåº¦éå¸¸æ…¢ï¼Œæ’‘æ­»äº†ä¸åˆ°2MB/sï¼Œ50GBå¤åˆ¶å®Œä¸çŸ¥é“çŒ´å¹´é©¬æœˆäº†ï¼Œå®Œå…¨ä¸è¡Œã€‚ä»¥ä¸ºscpçš„é—®é¢˜ã€‚

2. å°è¯•2

`sftp ä¸Šä¼ `ï¼Œ æµ‹è¯•ä¾ç„¶å¾ˆæ…¢ã€‚

3. å°è¯•3

`pip3 install servefile`, `servefile -u ./`, æ‰“å¼€ç½‘é¡µä¸Šä¼ æ–‡ä»¶ï¼Œå‘ç°ä¾ç„¶æ…¢ã€‚ éƒé—·:)

4. å°è¯•4

çªç„¶æƒ³èµ·æ¥ï¼Œ è€çš„ç¬”è®°æœ¬ï¼Œæ—¶é—´å¾ˆä¹…äº†ï¼Œ å¥½åƒæ˜¯ä¸æ”¯æŒwifi/5GHz, æµ‹é€Ÿè¯•äº†ä¸‹ã€‚

``` bash
# server
apt install iperf3
iperf3 -s

# client
brew istall iperf3
iperf3 -c 192.168.*.* //server ip
```

```bash
-----------------------------------------------------------
Server listening on 5201 (test #1)
-----------------------------------------------------------
Accepted connection from 192.168.31.132, port 55582
[  5] local 192.168.31.43 port 5201 connected to 192.168.31.132 port 55584
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-1.00   sec  1.11 MBytes  9.27 Mbits/sec
[  5]   1.00-2.00   sec   918 KBytes  7.49 Mbits/sec
[  5]   2.00-3.00   sec   851 KBytes  6.98 Mbits/sec
[  5]   3.00-4.00   sec   798 KBytes  6.53 Mbits/sec
[  5]   4.00-5.00   sec  1.07 MBytes  9.01 Mbits/sec
[  5]   5.00-6.00   sec  1.86 MBytes  15.6 Mbits/sec
[  5]   6.00-7.00   sec  1.79 MBytes  15.0 Mbits/sec
[  5]   7.00-8.00   sec  2.61 MBytes  22.0 Mbits/sec
[  5]   8.00-9.00   sec  2.28 MBytes  19.2 Mbits/sec
[  5]   9.00-10.00  sec  2.61 MBytes  21.8 Mbits/sec
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.09  sec  15.8 MBytes  13.2 Mbits/sec                  receiver
-----------------------------------------------------------
Server listening on 5201 (test #2)
```

æ‰“å¼€ubuntuçœ‹ï¼Œè¿˜çœŸçš„ä¸æ”¯æŒï¼Œåªèƒ½wifi/2.4GHzğŸ˜…ã€‚ 

é‚£å°±åªèƒ½ç”¨ç»ˆææ‰‹æ®µäº†ï¼Œ Uç›˜æ‹·è´ï¼Œæ¸…ç†äº†ä¸€ä¸ªå¹²å‡€Uç›˜ï¼Œå¤åˆ¶åˆ°äº†Uç›˜ä¸Š

### æŒ‚è½½Uç›˜

å‚è€ƒï¼š [ubuntuè‡ªåŠ¨æŒ‚è½½Uç›˜](https://www.milinger.com/a254.html)

``` bash
> sudo su
# fdisk -l //æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡
# blkid // æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡çš„UUID
# mkdir /media/upan1
# vim /etc/fstab  //file system table

UUID=95200A4E78851E13 /meida/upan1 ntfs defaults 0 0
# å‚æ•°è¯´æ˜ï¼š
# ç¡¬ç›˜åˆ†åŒºçš„ UUID å€¼
# æŒ‚è½½çš„ç›®æ ‡è·¯å¾„
# åˆ†åŒºæ ¼å¼ è¿™é‡Œä¸€èˆ¬ä¸º ext4
# æŒ‚è½½å‚æ•° ä¸€èˆ¬ä¸ºé»˜è®¤ defaults
# å¤‡ä»½ 0ä¸ºä¸å¤‡ä»½ï¼Œ 1ä¸ºæ¯å¤©å¤‡ä»½ï¼Œ2ä¸ºä¸å®šæœŸå¤‡ä»½
# æ£€æµ‹ 0ä¸ºä¸æ£€æµ‹ï¼Œå…¶ä»–ä¸ºä¼˜å…ˆçº§

mount -a  // Mount  all  filesystems mentioned in fstab
```

### å¤åˆ¶æ–‡ä»¶åˆ°ç¡¬ç›˜

æ–‡ä»¶å¤ªå¤šï¼Œ `mv` å‘½ä»¤è¡Œä¸­å¤åˆ¶ï¼Œ çœ‹ä¸åˆ°è¿›åº¦æ˜¯ä¸è¡Œçš„ï¼Œ å¿…é¡»å¾—èƒ½è§‚å¯Ÿåˆ°è¿›åº¦ï¼Œ `rsync`æ”¯æŒå±•ç¤ºå¤åˆ¶è¿›åº¦

1. [Moving Files in Linux While Showing Progress](https://www.baeldung.com/linux/moving-files-showing-progress)
2. [rsync ç”¨æ³•æ•™ç¨‹ - é˜®ä¸€å³°](https://www.ruanyifeng.com/blog/2020/08/rsync.html)

`rsync -ar -P upan/m1/ hpan/` 

1. -P æ˜¾ç¤ºè¿›åº¦ï¼Œé€Ÿåº¦
2. -a å¤åˆ¶å…ƒä¿¡æ¯ï¼Œåˆ›å»ºæ—¶é—´ç­‰
3. -r é€’å½’
4. `upan/m1 hpan/` ->  `hpan/m1/...`  
5. `upan/m1/ hpan/` ->  `hpan/... hpan/...`  (sourceæ·»åŠ /, è¡¨ç¤ºä»…å¤åˆ¶å†…å®¹)


### å…¶ä»–

1. pip3 åˆ‡æ¢æº

```bash
pip3 config set global.index-url  https://mirrors.aliyun.com/pypi/simple
# Writing to /Users/demo/.config/pip/pip.conf
pip3 config set global.trusted-host  mirrors.aliyun.com
# Writing to /Users/demo/.config/pip/pip.conf
```

2. è¿œç¨‹ç®¡ç†ubuntuæ–‡ä»¶

æ–‡ä»¶å¤åˆ¶å®Œæˆåï¼Œéœ€è¦æ•´ç†æ–‡ä»¶ç›®å½•ï¼Œé¢‘ç¹çš„ç§»åŠ¨æ–‡ä»¶, åœ¨ssh ä¸­æ“ä½œå°±å¤ªç´¯äººäº†ï¼Œä¸­æ–‡çš„tabè¡¥å…¨ä¹Ÿæ˜¯ä¸ªéº»çƒ¦äº‹ã€‚

`termius` æ”¯æŒuiç‰ˆæœ¬çš„sftpï¼Œä½†æ˜¯ç§»åŠ¨æ–‡ä»¶éœ€è¦`server -> client -> server`, å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚ 

æœç´¢åï¼Œ å†³å®šä½¿ç”¨ `samba(smbåè®®)` çš„æ–¹å¼ï¼Œ ubuntu server, `apt install samba`

å‚è€ƒï¼š [install-and-configure-samba](https://ubuntu.com/tutorials/install-and-configure-samba#3-setting-up-samba)

å®‰è£…å®Œæˆåï¼Œ mac finderä¸Š `å‰å¾€ -> è¿æ¥æœåŠ¡å™¨ -> smb://192.168.*.*/shareName`, å°±å¯ä»¥è¿æ¥ä¸Š`copy,move,delete file`.
